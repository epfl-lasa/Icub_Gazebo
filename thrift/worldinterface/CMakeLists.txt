# Copyright (C) 2015 iCub Facility
# Authors: Lorenzo Natale
# CopyPolicy: Released under the terms of the LGPLv2.1 or later, see LGPL.TXT

cmake_minimum_required(VERSION 2.8.11)

PROJECT(RPC_worldinterface)

yarp_idl_to_dir(worldinterface_rpc.thrift ${CMAKE_CURRENT_SOURCE_DIR}/autogenerated WIRPC_SRC WIRPC_HEADERS WIRPC_INCLUDES)

include_directories(${WIRPC_INCLUDES} ${YARP_INCLUDE_DIRS})
add_library(gazebo_yarp_rpc_worldinterface SHARED ${WIRPC_SRC} ${WIRPC_HEADERS})
target_link_libraries(gazebo_yarp_rpc_worldinterface ${YARP_LIBRARIES})


target_include_directories(gazebo_yarp_rpc_worldinterface PUBLIC 
                            "$<BUILD_INTERFACE:${WIRPC_INCLUDES}>"
                            "$<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}/gazebo>")

set_property(TARGET gazebo_yarp_rpc_worldinterface PROPERTY PUBLIC_HEADER ${WIRPC_HEADERS})

install(TARGETS gazebo_yarp_rpc_worldinterface
                LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
                PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/gazebo)

